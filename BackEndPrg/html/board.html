<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시판</title>
    <link rel="stylesheet" href="/BackEndPrg/css/board.css">
</head>

<body>
    <header class="header">
        <div class="header--logo"><a href="mainPage.html">IT's Shop</a></div>
        <div class="header--actions">
            <div class="header--login"><a href="mainPage.html">로그아웃</a></div>
        </div>
    </header>

    <!-- 게시판 컨테이너 -->
    <section class="board-container">
        <!-- 첫 번째 카드 -->
        <div class="card" data-card-id="1">
            <div class="image-placeholder">
                <input type="file" id="image-upload-1" accept="image/*">
                <img src="/BackEndPrg/img/avatar.png" alt="업로드된 이미지">
            </div>
            <a href="detail.html" class="title">Apple MacBook Pro 14"</a>
            <div class="category">노트북</div>
            <div class="price">2,900,000₩</div>
            <button class="edit-btn">수정</button>
            <button class="delete-btn">삭제</button>
        </div>

        <!-- 다른 카드들도 동일하게 추가 -->
    </section>

    <!-- 새 카드 추가 섹션 -->
    <section class="add-card-form">
        <h2>새 카드 추가</h2>
        <label for="new-card-title">제목:</label>
        <input type="text" id="new-card-title" placeholder="상품 제목을 입력하세요">

        <label for="new-card-category">카테고리:</label>
        <input type="text" id="new-card-category" placeholder="카테고리를 입력하세요">

        <label for="new-card-price">가격:</label>
        <input type="number" id="new-card-price" placeholder="가격을 입력하세요 (₩)">

        <label for="new-card-image">이미지 업로드:</label>
        <input type="file" id="new-card-image" accept="image/*">

        <button id="add-card-button">카드 추가</button>
    </section>

    <footer class="footer">
        <p>&copy; 2024 Your Company. All rights reserved.</p>
        <div class="footer-links">
            <a href="/BackEndPrg/html/contactUs.html">Contact Us</a>
        </div>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const boardContainer = document.querySelector(".board-container");
            const addCardButton = document.querySelector("#add-card-button");

            // 카드 추가 기능
            addCardButton.addEventListener("click", () => {
                const title = document.querySelector("#new-card-title").value.trim();
                const category = document.querySelector("#new-card-category").value.trim();
                const price = document.querySelector("#new-card-price").value.trim();
                const imageInput = document.querySelector("#new-card-image");
                const imageFile = imageInput.files[0];

                if (!title || !category || !price) {
                    alert("모든 필드를 입력해주세요!");
                    return;
                }

                const reader = new FileReader();
                reader.onload = (event) => {
                    const newCardHTML = `
                        <div class="card">
                            <div class="image-placeholder">
                                <img src="${event.target.result}" alt="업로드된 이미지">
                            </div>
                            <a href="#" class="title">${title}</a>
                            <div class="category">${category}</div>
                            <div class="price">${price}₩</div>
                            <button class="edit-btn">수정</button>
                            <button class="delete-btn">삭제</button>
                        </div>
                    `;

                    boardContainer.insertAdjacentHTML("beforeend", newCardHTML);
                };

                if (imageFile) {
                    reader.readAsDataURL(imageFile);
                } else {
                    const defaultImage = "/BackEndPrg/img/avatar.png";
                    const event = { target: { result: defaultImage } }; // 기본 이미지 처리
                    reader.onload(event);
                }

                // 입력 필드 초기화
                document.querySelector("#new-card-title").value = "";
                document.querySelector("#new-card-category").value = "";
                document.querySelector("#new-card-price").value = "";
                imageInput.value = "";
            });

            // 수정 및 삭제 버튼 이벤트 연결
            boardContainer.addEventListener("click", (event) => {
                const target = event.target;

                // 수정 버튼 클릭 처리
                if (target.classList.contains("edit-btn")) {
                    const card = target.closest(".card");
                    const title = card.querySelector(".title");
                    const category = card.querySelector(".category");
                    const price = card.querySelector(".price");

                    const newTitle = prompt("새 제목 입력:", title.textContent);
                    const newCategory = prompt("새 카테고리 입력:", category.textContent);
                    const newPrice = prompt("새 가격 입력:", price.textContent.replace("₩", "").trim());

                    if (newTitle) title.textContent = newTitle;
                    if (newCategory) category.textContent = newCategory;
                    if (newPrice) price.textContent = `${newPrice}₩`;
                }

                // 삭제 버튼 클릭 처리
                if (target.classList.contains("delete-btn")) {
                    if (confirm("정말 삭제하시겠습니까?")) {
                        target.closest(".card").remove();
                    }
                }
            });
        });
    </script>
</body>

</html>
